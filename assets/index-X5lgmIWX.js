(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();function b(){const o=Math.floor(Math.random()*10)+1,e=Math.floor(Math.random()*10)+1,s=o*e;return{factor1:o,factor2:e,operation:"Ã—",answer:s,digitsInAnswer:s.toString().length}}const C="?";class w{constructor(e){this.currentProblem=null,this.questionText="";const t=document.getElementById("math-problem-template").content.cloneNode(!0);this.element=t.firstElementChild,this.problemText=this.element.querySelector(".math-problem-text"),e.appendChild(this.element)}generateProblem(){this.currentProblem=b(),this.element.classList.remove("hidden"),this.setTextContent(),this.questionText=this.formatQuestion(this.currentProblem),this.setTextContent()}setTextContent(e=""){this.currentProblem&&(e||(e=C),this.problemText.textContent=`${this.questionText} ${e}`)}updateInput(e){this.setTextContent(e)}checkAnswer(e){return this.currentProblem?this.currentProblem.answer===e:!1}formatQuestion(e){return e?`${e.factor1} ${e.operation} ${e.factor2} =`:""}clear(){this.element.classList.add("hidden"),this.problemText.textContent="",this.currentProblem=null}hide(){this.element.classList.add("hidden")}hasEnoughDigits(e){return this.currentProblem?e===this.currentProblem.digitsInAnswer:!1}}class E{constructor(e,s,t){this.onKeyboardInput=s,this.onEndGame=t;const r=document.getElementById("keyboard-template").content.cloneNode(!0);this.element=r.firstElementChild,e.appendChild(this.element),this.init()}init(){const e=[[1,2,3,4,5],[6,7,8,9,0]],s=document.getElementById("keyboard-row-template"),t=document.getElementById("keyboard-button-template");for(const u of e){const a=s.content.cloneNode(!0).firstElementChild;for(const m of u){const g=t.content.cloneNode(!0).firstElementChild;g.textContent=m.toString(),g.addEventListener("click",()=>{this.onKeyboardInput(m)}),a.appendChild(g)}this.element.appendChild(a)}const i=document.getElementById("keyboard-actions-template").content.cloneNode(!0).firstElementChild;i.querySelector(".keyboard-clear").addEventListener("click",()=>{this.onKeyboardInput("clear")}),i.querySelector(".keyboard-submit").addEventListener("click",()=>{this.onEndGame()}),this.element.appendChild(i)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}function f(o){return new Promise(e=>setTimeout(e,o))}class S{constructor(e){const t=document.getElementById("scoring-view-template").content.cloneNode(!0);this.scoreElement=t.firstElementChild,e.appendChild(this.scoreElement)}updateScore(e){this.scoreElement.textContent=`Score: ${e}`}show(){this.scoreElement.classList.remove("hidden")}hide(){this.scoreElement.classList.add("hidden")}}class T{constructor(e){this.parent=e;const t=document.getElementById("ground-template").content.cloneNode(!0);this.ground=t.firstElementChild,this.parent.appendChild(this.ground)}}class v{constructor(e){const t=document.getElementById("zombie-target-template").content.cloneNode(!0);this.element=t.firstElementChild,e.appendChild(this.element)}getElement(){return this.element}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class I{constructor(e){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=80,this.frameCount=16,this.animate=s=>{this.lastFrameTime||(this.lastFrameTime=s);const t=s-this.lastFrameTime;if(t>this.frameInterval){this.lastFrameTime=s-t%this.frameInterval,this.currentFrame=(this.currentFrame+1)%this.frameCount;const r=this.currentFrame*81;this.element.style.backgroundPosition=`-${r}px 0`}this.animationFrameId=requestAnimationFrame(this.animate)},this.element=e,this.element.classList.add("zombie-animation")}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}reset(){this.stop(),this.currentFrame=0,this.element.style.backgroundPosition="0 0",this.start()}}class k{constructor(e,s,t){this.walkFrameId=null,this.startPosition=0,this.walkDistance=0,this.walkDuration=16e3,this.onTargetReached=null,this.move=h=>{this.startTime||(this.startTime=h);const c=(h-this.startTime)/this.walkDuration;this.element.style.left=`${this.startPosition-c*this.walkDistance}px`,this.hasReachedTarget()?(this.stop(),this.onTargetReached&&this.onTargetReached()):this.walkFrameId=requestAnimationFrame(this.move)},this.startTime=0;const r=document.getElementById("zombie-container-template").content.cloneNode(!0);this.element=r.firstElementChild,this.gameBoard=e,this.target=s;const i=this.element.querySelector(".zombie-walk");this.animation=new I(i),e.appendChild(this.element);const l=this.gameBoard.getBoundingClientRect();this.element.style.left=`${l.width}px`,this.onTargetReached=t}hasReachedTarget(){const e=parseFloat(this.element.style.left)||0,s=this.gameBoard.getBoundingClientRect(),n=this.target.getElement().getBoundingClientRect().right-s.left;return e<=n}start(){this.stop(),this.startTime=0,requestAnimationFrame(()=>{const e=this.gameBoard.getBoundingClientRect(),n=this.target.getElement().getBoundingClientRect().left-e.left;this.startPosition=e.width,this.walkDistance=this.startPosition-n,this.element.style.left=`${this.startPosition}px`,this.animation.start(),this.walkFrameId=requestAnimationFrame(this.move)})}stop(){this.animation.stop(),this.walkFrameId&&(cancelAnimationFrame(this.walkFrameId),this.walkFrameId=null)}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}reset(){this.start()}}class z{constructor(e,s){const n=document.getElementById("game-board-template").content.cloneNode(!0);this.boardElement=n.firstElementChild,this.groundElement=new T(this.boardElement),this.zombieTarget=new v(this.boardElement),this.zombie=new k(this.boardElement,this.zombieTarget,()=>s()),e.appendChild(this.boardElement),this.resizeHandler=()=>this.handleResize(),window.addEventListener("resize",this.resizeHandler)}handleResize(){this.boardElement.classList.contains("hidden")||this.zombie.reset()}getZombieTarget(){return this.zombieTarget}show(){this.boardElement.classList.remove("hidden"),this.zombieTarget.show(),this.zombie.start(),this.zombieTarget.show()}hide(){this.boardElement.classList.add("hidden"),this.zombieTarget.hide()}zombieReset(){this.zombie.reset()}destroy(){window.removeEventListener("resize",this.resizeHandler)}}class P{constructor(e,s,t){this.currentInput="",this.scoringSystem=s,this.gameBoardComponent=new z(e,()=>this.targetReached()),this.mathProblem=new w(e),this.keyboard=new E(e,async n=>await this.handleKeyboardInput(n),()=>this.endGame()),this.scoringView=new S(e),this.scoringSystem.setOnScoreChange(n=>this.scoringView.updateScore(n)),this.onGameOver=t}async handleKeyboardInput(e){typeof e=="number"?this.currentInput+=e:e==="clear"?this.clearInput():e==="end"&&this.endGame(),this.mathProblem.updateInput(this.currentInput),await this.checkAnswer()}endGame(){this.onGameOver()}clearInput(){this.currentInput="",this.mathProblem.updateInput("")}async checkAnswer(){if(!this.mathProblem.hasEnoughDigits(this.currentInput.length))return;const e=parseInt(this.currentInput,10);this.mathProblem.checkAnswer(e)?(this.scoringSystem.addToCurrentScore(),this.scoringSystem.isStreakCompleted()&&(this.gameBoardComponent.zombieReset(),this.scoringSystem.resetCorrectAnswersStreak()),await f(100),this.mathProblem.generateProblem(),this.currentInput=""):(this.scoringSystem.resetCorrectAnswersStreak(),await f(200),this.clearInput())}targetReached(){this.onGameOver()}restartGame(){this.scoringSystem.resetCurrentScore()}start(){this.scoringSystem.resetCurrentScore(),this.gameBoardComponent.show(),this.keyboard.show(),this.scoringView.show(),this.mathProblem.generateProblem()}stop(){}}class B{constructor(e,s){this.onGameOver=()=>{this.pageManager.show("game-over")},this.pageManager=e,this.pageContainer=document.getElementById("game-page"),this.createBackground();const n=document.getElementById("game-header-template").content.cloneNode(!0);this.gameHeader=n.firstElementChild,this.pageContainer.appendChild(this.gameHeader);const l=document.getElementById("game-content-template").content.cloneNode(!0).firstElementChild;this.pageContainer.appendChild(l),this.gameController=new P(l,s,()=>this.onGameOver()),this.pageContainer.classList.add("hidden")}createBackground(){const e=[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"}],s=document.getElementById("start-page-star-template");e.forEach(t=>{const r=s.content.cloneNode(!0).firstElementChild;r.style.top=t.top,r.style.fontSize=t.size,t.left&&(r.style.left=t.left),t.right&&(r.style.right=t.right),this.pageContainer.appendChild(r)})}show(){this.gameController.start();const e=this.pageContainer.querySelector("#score");if(e){this.gameHeader.innerHTML="";const n=document.getElementById("score-container-template").content.cloneNode(!0).firstElementChild;n.appendChild(e),this.gameHeader.appendChild(n)}this.pageContainer.classList.remove("hidden")}hide(){this.gameController.stop(),this.pageContainer.classList.add("hidden")}}class L{constructor(e,s){this.container=e;const n=document.getElementById("difficulty-select-template").content.cloneNode(!0);this.selectElement=n.querySelector("select"),e.appendChild(n),this.selectElement.addEventListener("change",r=>{const i=r.target.value;s.setDifficultyLevel(i)})}hide(){this.container.classList.add("hidden")}show(){this.container.classList.remove("hidden")}}class F{constructor(e,s){this.container=document.getElementById("start-page"),this.pageManager=e,this.createBackground(),this.createContent(s)}createBackground(){const e=document.getElementById("start-page-star-template"),s=document.getElementById("start-page-moon-template"),t=document.getElementById("start-page-zombie-silhouette-template"),n=document.getElementById("start-page-zombie-silhouettes-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(c=>{const a=e.content.cloneNode(!0),m=a.querySelector(".star");m.style.top=c.top,m.style.fontSize=c.size,c.left&&(m.style.left=c.left),c.right&&(m.style.right=c.right),this.container.appendChild(a)});const i=s.content.cloneNode(!0);this.container.appendChild(i);const l=n.content.cloneNode(!0),h=l.querySelector(".zombie-silhouettes");[{left:"5%"},{left:"15%"},{left:"25%"},{right:"25%"},{right:"15%"},{right:"5%"}].forEach(c=>{const a=t.content.cloneNode(!0),m=a.querySelector(".zombie-silhouette");c.left&&(m.style.left=c.left),c.right&&(m.style.right=c.right),h.appendChild(a)}),this.container.appendChild(l)}createContent(e){const t=document.getElementById("start-page-content-template").content.cloneNode(!0),n=t.querySelector(".difficulty-container");this.difficultyLevelComponent=new L(n,e),this.startGameButton=t.querySelector(".start-game-button"),this.startGameButton.addEventListener("click",()=>{this.pageManager.show("game")}),this.container.appendChild(t)}show(){this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}class x{constructor(e,s,t){const r=document.getElementById("game-over-container-template").content.cloneNode(!0);this.element=r.querySelector(".game-over-container"),this.scoreElement=this.element.querySelector(".score-value"),this.encouragement=this.element.querySelector(".encouragement"),this.starRating=this.element.querySelector(".star-rating"),this.homeButton=this.element.querySelector(".home-button"),this.restartButton=this.element.querySelector(".play-again-button"),this.homeButton.addEventListener("click",t),this.restartButton.addEventListener("click",s),e.appendChild(this.element)}show(e){this.scoreElement.textContent=e.toString(),this.updateStarRating(e),this.updateEncouragement(e),this.showElement()}updateStarRating(e){let s=0;e>=100?s=5:e>=75?s=4:e>=50?s=3:e>=25?s=2:e>=10&&(s=1),this.starRating.innerHTML="";const t=document.getElementById("star-rating-star-template");for(let n=0;n<5;n++){const i=t.content.cloneNode(!0).querySelector("span");i.className=n<s?"star-filled":"star-empty",this.starRating.appendChild(i)}}updateEncouragement(e){const t=[{threshold:0,message:"Keep Trying! You'll get better! ðŸ’ª"},{threshold:10,message:"Good start! Keep practicing! ðŸŒŸ"},{threshold:25,message:"Nice work! You're improving! ðŸŽ‰"},{threshold:50,message:"Great job! You're doing awesome! ðŸŒˆ"},{threshold:75,message:"Fantastic! You're a math star! â­"},{threshold:100,message:"Incredible! You're a math master! ðŸ†"}].reverse().find(n=>e>=n.threshold);this.encouragement.textContent=(t==null?void 0:t.message)||"Keep Trying! You'll get better! ðŸ’ª"}showElement(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class A{constructor(e,s){this.onRestart=()=>{this.pageManager.show("game")},this.onHome=()=>{this.pageManager.show("start")},this.pageManager=e,this.pageContainer=document.getElementById("game-over-page"),this.scoringSystem=s,this.createBackground(),this.gameOverComponent=new x(this.pageContainer,()=>this.onRestart(),()=>this.onHome()),this.hide()}createBackground(){const e=document.getElementById("start-page-star-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(t=>{const r=e.content.cloneNode(!0).querySelector(".star");r.style.top=t.top,r.style.fontSize=t.size,t.left&&(r.style.left=t.left),t.right&&(r.style.right=t.right),this.pageContainer.appendChild(r)});for(let t=0;t<3;t++){const r=e.content.cloneNode(!0).querySelector(".star");r.style.bottom=`${200+t*50}px`,r.style.left=`${20+t*30}%`,r.style.fontSize="25px",this.pageContainer.appendChild(r)}}show(){this.gameOverComponent.show(this.scoringSystem.getCurrentScore()),this.pageContainer.classList.remove("hidden")}hide(){this.pageContainer.classList.add("hidden")}}class R{constructor(){this.pages={},this.currentPage=null}add(e,s){this.pages[e]=s}show(e){this.currentPage&&this.pages[this.currentPage].hide(),this.currentPage=e,this.pages[e].show()}hideAll(){for(const e of Object.values(this.pages))e.hide()}}var d=(o=>(o.Easy="easy",o.Medium="medium",o.Hard="hard",o.VeryHard="very-hard",o.Expert="expert",o))(d||{});class q{constructor(){this.currentScore=0,this.onScoreChange=null,this.difficultyLevel=d.Easy,this.correctAnswersStreak=0}setDifficultyLevel(e){this.difficultyLevel=e,this.resetCorrectAnswersStreak()}addToCurrentScore(){let e=this.calculateScore();this.currentScore+=e,this.correctAnswersStreak++,this.onScoreChange&&this.onScoreChange(this.currentScore)}calculateScore(){let e=0;switch(this.difficultyLevel){case d.Easy:e=1;break;case d.Medium:e=2;break;case d.Hard:e=3;break;case d.VeryHard:e=4;break;case d.Expert:e=5;break}return e}getCurrentScore(){return this.currentScore}resetCurrentScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}resetScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}setOnScoreChange(e){this.onScoreChange=e}resetCorrectAnswersStreak(){this.correctAnswersStreak=0}isStreakCompleted(){const e={[d.Easy]:1,[d.Medium]:2,[d.Hard]:3,[d.VeryHard]:4,[d.Expert]:5};return this.correctAnswersStreak>=e[this.difficultyLevel]}}const N="modulepreload",G=function(o){return"/"+o},y={},O=function(e,s,t){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(h=>{if(h=G(h),h in y)return;y[h]=!0;const u=h.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${c}`))return;const a=document.createElement("link");if(a.rel=u?"stylesheet":N,u||(a.as="script"),a.crossOrigin="",a.href=h,l&&a.setAttribute("nonce",l),document.head.appendChild(a),u)return new Promise((m,p)=>{a.addEventListener("load",m),a.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return n.then(i=>{for(const l of i||[])l.status==="rejected"&&r(l.reason);return e().catch(r)})};function M(o={}){const{immediate:e=!1,onNeedRefresh:s,onOfflineReady:t,onRegistered:n,onRegisteredSW:r,onRegisterError:i}=o;let l,h;const u=async(a=!0)=>{await h};async function c(){if("serviceWorker"in navigator){if(l=await O(async()=>{const{Workbox:a}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:a}},[]).then(({Workbox:a})=>new a("/sw.js",{scope:"/",type:"classic"})).catch(a=>{i==null||i(a)}),!l)return;l.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),l.addEventListener("installed",a=>{a.isUpdate||t==null||t()}),l.register({immediate:e}).then(a=>{r?r("/sw.js",a):n==null||n(a)}).catch(a=>{i==null||i(a)})}}return h=c(),u}M({onNeedRefresh(){console.log("[PWA] New content available, will update on next visit")},onOfflineReady(){console.log("[PWA] App ready to work offline")},immediate:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("[App] Initializing PWA features");const o=new R,e=new q,s=new F(o,e),t=new B(o,e),n=new A(o,e);o.add("start",s),o.add("game",t),o.add("game-over",n),o.hideAll(),o.show("start"),window.addEventListener("pwa-installable",r=>{r.detail.canInstall&&console.log("[App] PWA can be installed")}),window.addEventListener("pwa-update-available",()=>{console.log("[App] PWA update available")})});
