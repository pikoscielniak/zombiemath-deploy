(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function b(){const r=Math.floor(Math.random()*10)+1,e=Math.floor(Math.random()*10)+1,n=r*e;return{factor1:r,factor2:e,operation:"Ã—",answer:n,digitsInAnswer:n.toString().length}}const C="?";class E{constructor(e){this.currentProblem=null,this.questionText="";const t=document.getElementById("math-problem-template").content.cloneNode(!0);this.element=t.firstElementChild,this.problemText=this.element.querySelector(".math-problem-text"),e.appendChild(this.element)}generateProblem(){this.currentProblem=b(),this.element.classList.remove("hidden"),this.setTextContent(),this.questionText=this.formatQuestion(this.currentProblem),this.setTextContent()}setTextContent(e=""){this.currentProblem&&(e||(e=C),this.problemText.textContent=`${this.questionText} ${e}`)}updateInput(e){this.setTextContent(e)}checkAnswer(e){return this.currentProblem?this.currentProblem.answer===e:!1}formatQuestion(e){return e?`${e.factor1} ${e.operation} ${e.factor2} =`:""}clear(){this.element.classList.add("hidden"),this.problemText.textContent="",this.currentProblem=null}hide(){this.element.classList.add("hidden")}hasEnoughDigits(e){return this.currentProblem?e===this.currentProblem.digitsInAnswer:!1}}class w{constructor(e,n,t){this.onKeyboardInput=n,this.onEndGame=t;const i=document.getElementById("keyboard-template").content.cloneNode(!0);this.element=i.firstElementChild,e.appendChild(this.element),this.init()}init(){const e=[[1,2,3,4,5],[6,7,8,9,0]],n=document.getElementById("keyboard-row-template"),t=document.getElementById("keyboard-button-template");for(const h of e){const o=n.content.cloneNode(!0).firstElementChild;for(const d of h){const g=t.content.cloneNode(!0).firstElementChild;g.textContent=d.toString(),g.addEventListener("click",()=>{this.onKeyboardInput(d)}),o.appendChild(g)}this.element.appendChild(o)}const a=document.getElementById("keyboard-actions-template").content.cloneNode(!0).firstElementChild;a.querySelector(".keyboard-clear").addEventListener("click",()=>{this.onKeyboardInput("clear")}),a.querySelector(".keyboard-submit").addEventListener("click",()=>{this.onEndGame()}),this.element.appendChild(a)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}function f(r){return new Promise(e=>setTimeout(e,r))}class S{constructor(e){const t=document.getElementById("scoring-view-template").content.cloneNode(!0);this.scoreElement=t.firstElementChild,e.appendChild(this.scoreElement)}updateScore(e){this.scoreElement.textContent=`Score: ${e}`}show(){this.scoreElement.classList.remove("hidden")}hide(){this.scoreElement.classList.add("hidden")}}class F{constructor(e){this.parent=e;const t=document.getElementById("ground-template").content.cloneNode(!0);this.ground=t.firstElementChild,this.parent.appendChild(this.ground)}}class T{constructor(e){const t=document.getElementById("zombie-target-template").content.cloneNode(!0);this.element=t.firstElementChild,e.appendChild(this.element)}getElement(){return this.element}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class v{constructor(e,n,t){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=80,this.frameCount=18,this.animate=s=>{this.lastFrameTime||(this.lastFrameTime=s);const i=s-this.lastFrameTime;if(i>this.frameInterval){this.lastFrameTime=s-i%this.frameInterval;const l=this.currentFrame*81;if(this.animationElement.style.backgroundPosition=`-${l}px 0`,this.currentFrame++,this.currentFrame>=this.frameCount){this.fadeOut();return}}this.animationFrameId=requestAnimationFrame(this.animate)},this.onComplete=t,this.element=document.createElement("div"),this.element.className="zombie-death-container",this.element.style.left=n,this.animationElement=document.createElement("div"),this.animationElement.className="zombie-death-animation",this.element.appendChild(this.animationElement),e.appendChild(this.element)}fadeOut(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.element.style.transition="opacity 0.8s ease-out",this.element.offsetHeight,this.element.style.opacity="0",setTimeout(()=>{this.cleanup()},800)}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}cleanup(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.onComplete()}}class I{constructor(e,n,t){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=166,this.frameCount=9,this.animate=a=>{this.lastFrameTime||(this.lastFrameTime=a);const l=a-this.lastFrameTime;if(l>this.frameInterval){this.lastFrameTime=a-l%this.frameInterval;const m=1417.5/9,h=this.currentFrame*m;if(this.animationElement.style.backgroundPosition=`-${h}px 0`,this.currentFrame++,this.currentFrame>=this.frameCount){this.stop(),setTimeout(()=>{this.cleanup()},200);return}}this.animationFrameId=requestAnimationFrame(this.animate)},this.onComplete=t,this.element=document.createElement("div"),this.element.className="zombie-eating-container";const i=parseFloat(n)-88;this.element.style.left=`${i}px`,this.animationElement=document.createElement("div"),this.animationElement.className="zombie-eating-animation",this.element.appendChild(this.animationElement),e.appendChild(this.element)}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}cleanup(){this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.onComplete()}}class z{constructor(e){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=80,this.frameCount=16,this.animate=n=>{this.lastFrameTime||(this.lastFrameTime=n);const t=n-this.lastFrameTime;if(t>this.frameInterval){this.lastFrameTime=n-t%this.frameInterval,this.currentFrame=(this.currentFrame+1)%this.frameCount;const i=this.currentFrame*81;this.element.style.backgroundPosition=`-${i}px 0`}this.animationFrameId=requestAnimationFrame(this.animate)},this.element=e,this.element.classList.add("zombie-animation")}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}reset(){this.stop(),this.currentFrame=0,this.element.style.backgroundPosition="0 0",this.start()}}class P{constructor(e,n,t){this.walkFrameId=null,this.startPosition=0,this.walkDistance=0,this.walkDuration=16e3,this.onTargetReached=null,this.move=m=>{this.startTime||(this.startTime=m);const c=(m-this.startTime)/this.walkDuration;this.element.style.left=`${this.startPosition-c*this.walkDistance}px`,this.hasReachedTarget()?(this.stop(),this.onTargetReached&&this.onTargetReached()):this.walkFrameId=requestAnimationFrame(this.move)},this.startTime=0;const i=document.getElementById("zombie-container-template").content.cloneNode(!0);this.element=i.firstElementChild,this.gameBoard=e,this.target=n;const a=this.element.querySelector(".zombie-walk");this.animation=new z(a),e.appendChild(this.element);const l=this.gameBoard.getBoundingClientRect();this.element.style.left=`${l.width}px`,this.onTargetReached=t}hasReachedTarget(){const e=parseFloat(this.element.style.left)||0,n=this.gameBoard.getBoundingClientRect(),s=this.target.getElement().getBoundingClientRect().right-n.left;return e<=s}start(){this.stop(),this.show(),this.startTime=0,requestAnimationFrame(()=>{const e=this.gameBoard.getBoundingClientRect(),s=this.target.getElement().getBoundingClientRect().left-e.left;this.startPosition=e.width,this.walkDistance=this.startPosition-s,this.element.style.left=`${this.startPosition}px`,this.animation.start(),this.walkFrameId=requestAnimationFrame(this.move)})}stop(){this.animation.stop(),this.walkFrameId&&(cancelAnimationFrame(this.walkFrameId),this.walkFrameId=null)}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}reset(){this.start()}getElement(){return this.element}}class k{constructor(e,n){const s=document.getElementById("game-board-template").content.cloneNode(!0);this.boardElement=s.firstElementChild,this.groundElement=new F(this.boardElement),this.zombieTarget=new T(this.boardElement),this.zombie=new P(this.boardElement,this.zombieTarget,()=>n()),e.appendChild(this.boardElement),this.resizeHandler=()=>this.handleResize(),window.addEventListener("resize",this.resizeHandler)}handleResize(){this.boardElement.classList.contains("hidden")||this.zombie.reset()}getZombieTarget(){return this.zombieTarget}show(){this.boardElement.classList.remove("hidden"),this.zombieTarget.show(),this.zombie.start()}hide(){this.boardElement.classList.add("hidden"),this.zombieTarget.hide()}zombieReset(){this.zombie.reset(),this.zombieTarget.show()}triggerDeathAnimation(){const e=this.zombie.getElement().style.left;new v(this.boardElement,e,()=>{}).start()}triggerEatingAnimation(e){const n=this.zombie.getElement().style.left;this.zombie.hide(),new I(this.boardElement,n,e).start(),this.zombieTarget.hide()}destroy(){window.removeEventListener("resize",this.resizeHandler)}}class L{constructor(e,n,t){this.currentInput="",this.scoringSystem=n,this.gameBoardComponent=new k(e,()=>this.targetReached()),this.mathProblem=new E(e),this.keyboard=new w(e,async s=>await this.handleKeyboardInput(s),()=>this.endGame()),this.scoringView=new S(e),this.scoringSystem.setOnScoreChange(s=>this.scoringView.updateScore(s)),this.onGameOver=t}async handleKeyboardInput(e){typeof e=="number"?this.currentInput+=e:e==="clear"?this.clearInput():e==="end"&&this.endGame(),this.mathProblem.updateInput(this.currentInput),await this.checkAnswer()}endGame(){this.onGameOver()}clearInput(){this.currentInput="",this.mathProblem.updateInput("")}async checkAnswer(){if(!this.mathProblem.hasEnoughDigits(this.currentInput.length))return;const e=parseInt(this.currentInput,10);this.mathProblem.checkAnswer(e)?(this.scoringSystem.addToCurrentScore(),this.scoringSystem.isStreakCompleted()&&(this.gameBoardComponent.triggerDeathAnimation(),this.gameBoardComponent.zombieReset(),this.scoringSystem.resetCorrectAnswersStreak()),await f(100),this.mathProblem.generateProblem(),this.currentInput=""):(this.scoringSystem.resetCorrectAnswersStreak(),await f(200),this.clearInput())}targetReached(){this.gameBoardComponent.triggerEatingAnimation(()=>{this.onGameOver()})}restartGame(){this.scoringSystem.resetCurrentScore()}start(){this.scoringSystem.resetCurrentScore(),this.gameBoardComponent.show(),this.keyboard.show(),this.scoringView.show(),this.mathProblem.generateProblem()}stop(){}}class B{constructor(e,n){this.onGameOver=()=>{this.pageManager.show("game-over")},this.pageManager=e,this.pageContainer=document.getElementById("game-page"),this.createBackground();const s=document.getElementById("game-header-template").content.cloneNode(!0);this.gameHeader=s.firstElementChild,this.pageContainer.appendChild(this.gameHeader);const l=document.getElementById("game-content-template").content.cloneNode(!0).firstElementChild;this.pageContainer.appendChild(l),this.gameController=new L(l,n,()=>this.onGameOver()),this.pageContainer.classList.add("hidden")}createBackground(){const e=[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"}],n=document.getElementById("start-page-star-template");e.forEach(t=>{const i=n.content.cloneNode(!0).firstElementChild;i.style.top=t.top,i.style.fontSize=t.size,t.left&&(i.style.left=t.left),t.right&&(i.style.right=t.right),this.pageContainer.appendChild(i)})}show(){this.gameController.start();const e=this.pageContainer.querySelector("#score");if(e){this.gameHeader.innerHTML="";const s=document.getElementById("score-container-template").content.cloneNode(!0).firstElementChild;s.appendChild(e),this.gameHeader.appendChild(s)}this.pageContainer.classList.remove("hidden")}hide(){this.gameController.stop(),this.pageContainer.classList.add("hidden")}}class A{constructor(e,n){this.container=e;const s=document.getElementById("difficulty-select-template").content.cloneNode(!0);this.selectElement=s.querySelector("select"),e.appendChild(s),this.selectElement.addEventListener("change",i=>{const a=i.target.value;n.setDifficultyLevel(a)})}hide(){this.container.classList.add("hidden")}show(){this.container.classList.remove("hidden")}}class x{constructor(e,n){this.container=document.getElementById("start-page"),this.pageManager=e,this.createBackground(),this.createContent(n)}createBackground(){const e=document.getElementById("start-page-star-template"),n=document.getElementById("start-page-moon-template"),t=document.getElementById("start-page-zombie-silhouette-template"),s=document.getElementById("start-page-zombie-silhouettes-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(c=>{const o=e.content.cloneNode(!0),d=o.querySelector(".star");d.style.top=c.top,d.style.fontSize=c.size,c.left&&(d.style.left=c.left),c.right&&(d.style.right=c.right),this.container.appendChild(o)});const a=n.content.cloneNode(!0);this.container.appendChild(a);const l=s.content.cloneNode(!0),m=l.querySelector(".zombie-silhouettes");[{left:"5%"},{left:"15%"},{left:"25%"},{right:"25%"},{right:"15%"},{right:"5%"}].forEach(c=>{const o=t.content.cloneNode(!0),d=o.querySelector(".zombie-silhouette");c.left&&(d.style.left=c.left),c.right&&(d.style.right=c.right),m.appendChild(o)}),this.container.appendChild(l)}createContent(e){const t=document.getElementById("start-page-content-template").content.cloneNode(!0),s=t.querySelector(".difficulty-container");this.difficultyLevelComponent=new A(s,e),this.startGameButton=t.querySelector(".start-game-button"),this.startGameButton.addEventListener("click",()=>{this.pageManager.show("game")}),this.container.appendChild(t)}show(){this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}class q{constructor(e,n,t){const i=document.getElementById("game-over-container-template").content.cloneNode(!0);this.element=i.querySelector(".game-over-container"),this.scoreElement=this.element.querySelector(".score-value"),this.encouragement=this.element.querySelector(".encouragement"),this.starRating=this.element.querySelector(".star-rating"),this.homeButton=this.element.querySelector(".home-button"),this.restartButton=this.element.querySelector(".play-again-button"),this.homeButton.addEventListener("click",t),this.restartButton.addEventListener("click",n),e.appendChild(this.element)}show(e){this.scoreElement.textContent=e.toString(),this.updateStarRating(e),this.updateEncouragement(e),this.showElement()}updateStarRating(e){let n=0;e>=100?n=5:e>=75?n=4:e>=50?n=3:e>=25?n=2:e>=10&&(n=1),this.starRating.innerHTML="";const t=document.getElementById("star-rating-star-template");for(let s=0;s<5;s++){const a=t.content.cloneNode(!0).querySelector("span");a.className=s<n?"star-filled":"star-empty",this.starRating.appendChild(a)}}updateEncouragement(e){const t=[{threshold:0,message:"Keep Trying! You'll get better! ðŸ’ª"},{threshold:10,message:"Good start! Keep practicing! ðŸŒŸ"},{threshold:25,message:"Nice work! You're improving! ðŸŽ‰"},{threshold:50,message:"Great job! You're doing awesome! ðŸŒˆ"},{threshold:75,message:"Fantastic! You're a math star! â­"},{threshold:100,message:"Incredible! You're a math master! ðŸ†"}].reverse().find(s=>e>=s.threshold);this.encouragement.textContent=(t==null?void 0:t.message)||"Keep Trying! You'll get better! ðŸ’ª"}showElement(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class N{constructor(e,n){this.onRestart=()=>{this.pageManager.show("game")},this.onHome=()=>{this.pageManager.show("start")},this.pageManager=e,this.pageContainer=document.getElementById("game-over-page"),this.scoringSystem=n,this.createBackground(),this.gameOverComponent=new q(this.pageContainer,()=>this.onRestart(),()=>this.onHome()),this.hide()}createBackground(){const e=document.getElementById("start-page-star-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(t=>{const i=e.content.cloneNode(!0).querySelector(".star");i.style.top=t.top,i.style.fontSize=t.size,t.left&&(i.style.left=t.left),t.right&&(i.style.right=t.right),this.pageContainer.appendChild(i)});for(let t=0;t<3;t++){const i=e.content.cloneNode(!0).querySelector(".star");i.style.bottom=`${200+t*50}px`,i.style.left=`${20+t*30}%`,i.style.fontSize="25px",this.pageContainer.appendChild(i)}}show(){this.gameOverComponent.show(this.scoringSystem.getCurrentScore()),this.pageContainer.classList.remove("hidden")}hide(){this.pageContainer.classList.add("hidden")}}class R{constructor(){this.pages={},this.currentPage=null}add(e,n){this.pages[e]=n}show(e){this.currentPage&&this.pages[this.currentPage].hide(),this.currentPage=e,this.pages[e].show()}hideAll(){for(const e of Object.values(this.pages))e.hide()}}var u=(r=>(r.Easy="easy",r.Medium="medium",r.Hard="hard",r.VeryHard="very-hard",r.Expert="expert",r))(u||{});class O{constructor(){this.currentScore=0,this.onScoreChange=null,this.difficultyLevel=u.Easy,this.correctAnswersStreak=0}setDifficultyLevel(e){this.difficultyLevel=e,this.resetCorrectAnswersStreak()}addToCurrentScore(){let e=this.calculateScore();this.currentScore+=e,this.correctAnswersStreak++,this.onScoreChange&&this.onScoreChange(this.currentScore)}calculateScore(){let e=0;switch(this.difficultyLevel){case u.Easy:e=1;break;case u.Medium:e=2;break;case u.Hard:e=3;break;case u.VeryHard:e=4;break;case u.Expert:e=5;break}return e}getCurrentScore(){return this.currentScore}resetCurrentScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}resetScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}setOnScoreChange(e){this.onScoreChange=e}resetCorrectAnswersStreak(){this.correctAnswersStreak=0}isStreakCompleted(){const e={[u.Easy]:1,[u.Medium]:2,[u.Hard]:3,[u.VeryHard]:4,[u.Expert]:5};return this.correctAnswersStreak>=e[this.difficultyLevel]}}const G="modulepreload",M=function(r){return"/"+r},y={},H=function(e,n,t){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(m=>{if(m=M(m),m in y)return;y[m]=!0;const h=m.endsWith(".css"),c=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${c}`))return;const o=document.createElement("link");if(o.rel=h?"stylesheet":G,h||(o.as="script"),o.crossOrigin="",o.href=m,l&&o.setAttribute("nonce",l),document.head.appendChild(o),h)return new Promise((d,p)=>{o.addEventListener("load",d),o.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function $(r={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:t,onRegistered:s,onRegisteredSW:i,onRegisterError:a}=r;let l,m;const h=async(o=!0)=>{await m};async function c(){if("serviceWorker"in navigator){if(l=await H(async()=>{const{Workbox:o}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:o}},[]).then(({Workbox:o})=>new o("/sw.js",{scope:"/",type:"classic"})).catch(o=>{a==null||a(o)}),!l)return;l.addEventListener("activated",o=>{(o.isUpdate||o.isExternal)&&window.location.reload()}),l.addEventListener("installed",o=>{o.isUpdate||t==null||t()}),l.register({immediate:e}).then(o=>{i?i("/sw.js",o):s==null||s(o)}).catch(o=>{a==null||a(o)})}}return m=c(),h}$({onNeedRefresh(){console.log("[PWA] New content available, will update on next visit")},onOfflineReady(){console.log("[PWA] App ready to work offline")},immediate:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("[App] Initializing PWA features");const r=new R,e=new O,n=new x(r,e),t=new B(r,e),s=new N(r,e);r.add("start",n),r.add("game",t),r.add("game-over",s),r.hideAll(),r.show("start"),window.addEventListener("pwa-installable",i=>{i.detail.canInstall&&console.log("[App] PWA can be installed")}),window.addEventListener("pwa-update-available",()=>{console.log("[App] PWA update available")})});
