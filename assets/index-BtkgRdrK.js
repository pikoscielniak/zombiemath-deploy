(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function T(){const o=Math.floor(Math.random()*10)+1,e=Math.floor(Math.random()*10)+1,n=o*e;return{factor1:o,factor2:e,operation:"√ó",answer:n,digitsInAnswer:n.toString().length}}const I="?";class z{constructor(e){this.currentProblem=null,this.questionText="";const t=document.getElementById("math-problem-template").content.cloneNode(!0);this.element=t.firstElementChild,this.problemText=this.element.querySelector(".math-problem-text"),e.appendChild(this.element)}generateProblem(){this.currentProblem=T(),this.element.classList.remove("hidden"),this.setTextContent(),this.questionText=this.formatQuestion(this.currentProblem),this.setTextContent()}setTextContent(e=""){this.currentProblem&&(e||(e=I),this.problemText.textContent=`${this.questionText} ${e}`)}updateInput(e){this.setTextContent(e)}checkAnswer(e){return this.currentProblem?this.currentProblem.answer===e:!1}formatQuestion(e){return e?`${e.factor1} ${e.operation} ${e.factor2} =`:""}clear(){this.element.classList.add("hidden"),this.problemText.textContent="",this.currentProblem=null}hide(){this.element.classList.add("hidden")}hasEnoughDigits(e){return this.currentProblem?e===this.currentProblem.digitsInAnswer:!1}}class F{constructor(e,n,t){this.handleKeyDown=r=>{/^\d$/.test(r.key)?this.onKeyboardInput(parseInt(r.key,10)):(r.key==="Backspace"||r.key==="Delete")&&this.onKeyboardInput("clear")},this.onKeyboardInput=n,this.onEndGame=t;const s=document.getElementById("keyboard-template").content.cloneNode(!0);this.element=s.firstElementChild,e.appendChild(this.element),this.init()}init(){const e=[[1,2,3,4,5],[6,7,8,9,0]],n=document.getElementById("keyboard-row-template"),t=document.getElementById("keyboard-button-template");for(const c of e){const m=n.content.cloneNode(!0).firstElementChild;for(const a of c){const p=t.content.cloneNode(!0).firstElementChild;p.textContent=a.toString(),p.addEventListener("click",()=>{this.onKeyboardInput(a)}),m.appendChild(p)}this.element.appendChild(m)}const r=document.getElementById("keyboard-actions-template").content.cloneNode(!0).firstElementChild;r.querySelector(".keyboard-clear").addEventListener("click",()=>{this.onKeyboardInput("clear")}),this.initSlider(r),this.element.appendChild(r)}initSlider(e){const n=e.querySelector(".slider-container"),t=e.querySelector(".slider-handle"),i=e.querySelector(".slider-track");if(!n||!t)return;let s=!1,r=0,l=0,c=0,h=0,m=0,a=0;this.element.resetSlider=()=>{n.classList.remove("active"),t.style.transition="transform 0.3s ease-out",t.style.transform="translateX(0px)",i.style.opacity="1",setTimeout(()=>{t.style.transition=""},300),c=0};const d=f=>{s=!0,l=f.clientX,r=c,h=n.clientWidth,m=t.clientWidth,a=h-m-4,t.setPointerCapture(f.pointerId),t.style.cursor="grabbing",n.classList.add("dragging")},p=f=>{if(!s||a<=0)return;const C=f.clientX-l,w=r+C;c=Math.max(0,Math.min(w,a)),t.style.transform=`translateX(${c}px)`;const v=c/a;i.style.opacity=`${1-v}`},y=f=>{s&&(s=!1,t.releasePointerCapture(f.pointerId),t.style.cursor="grab",n.classList.remove("dragging"),a>0&&c>a*.95?(t.style.transform=`translateX(${a}px)`,n.classList.add("active"),this.onEndGame()):this.element.resetSlider())};t.addEventListener("pointerdown",d),t.addEventListener("pointermove",p),t.addEventListener("pointerup",y),t.addEventListener("pointercancel",y)}show(){this.element.classList.remove("hidden"),this.element.resetSlider&&this.element.resetSlider(),document.addEventListener("keydown",this.handleKeyDown)}hide(){this.element.classList.add("hidden"),document.removeEventListener("keydown",this.handleKeyDown)}}function S(o){return new Promise(e=>setTimeout(e,o))}class k{constructor(e){const t=document.getElementById("scoring-view-template").content.cloneNode(!0);this.scoreElement=t.firstElementChild,e.appendChild(this.scoreElement)}updateScore(e){this.scoreElement.textContent=`Score: ${e}`}show(){this.scoreElement.classList.remove("hidden")}hide(){this.scoreElement.classList.add("hidden")}}class A{constructor(e){this.parent=e;const t=document.getElementById("ground-template").content.cloneNode(!0);this.ground=t.firstElementChild,this.parent.appendChild(this.ground)}}class B{constructor(e){const t=document.getElementById("zombie-target-template").content.cloneNode(!0);this.element=t.firstElementChild,e.appendChild(this.element)}getElement(){return this.element}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class L{constructor(e,n,t){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=80,this.frameCount=18,this.animate=i=>{this.lastFrameTime||(this.lastFrameTime=i);const s=i-this.lastFrameTime;if(s>this.frameInterval){this.lastFrameTime=i-s%this.frameInterval;const l=this.currentFrame*81;if(this.animationElement.style.backgroundPosition=`-${l}px 0`,this.currentFrame++,this.currentFrame>=this.frameCount){this.fadeOut();return}}this.animationFrameId=requestAnimationFrame(this.animate)},this.onComplete=t,this.element=document.createElement("div"),this.element.className="zombie-death-container",this.element.style.left=n,this.animationElement=document.createElement("div"),this.animationElement.className="zombie-death-animation",this.element.appendChild(this.animationElement),e.appendChild(this.element)}fadeOut(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.element.style.transition="opacity 0.8s ease-out",this.element.offsetHeight,this.element.style.opacity="0",setTimeout(()=>{this.cleanup()},800)}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}cleanup(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.onComplete()}}class P{constructor(e,n,t){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=166,this.frameCount=9,this.animate=r=>{this.lastFrameTime||(this.lastFrameTime=r);const l=r-this.lastFrameTime;if(l>this.frameInterval){this.lastFrameTime=r-l%this.frameInterval;const c=1417.5/9,h=this.currentFrame*c;if(this.animationElement.style.backgroundPosition=`-${h}px 0`,this.currentFrame++,this.currentFrame>=this.frameCount){this.stop(),setTimeout(()=>{this.cleanup()},200);return}}this.animationFrameId=requestAnimationFrame(this.animate)},this.onComplete=t,this.element=document.createElement("div"),this.element.className="zombie-eating-container";const s=parseFloat(n)-88;this.element.style.left=`${s}px`,this.animationElement=document.createElement("div"),this.animationElement.className="zombie-eating-animation",this.element.appendChild(this.animationElement),e.appendChild(this.element)}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}cleanup(){this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.onComplete()}}class x{constructor(e){this.currentFrame=0,this.animationFrameId=null,this.lastFrameTime=0,this.frameInterval=80,this.frameCount=16,this.animate=n=>{this.lastFrameTime||(this.lastFrameTime=n);const t=n-this.lastFrameTime;if(t>this.frameInterval){this.lastFrameTime=n-t%this.frameInterval,this.currentFrame=(this.currentFrame+1)%this.frameCount;const s=this.currentFrame*81;this.element.style.backgroundPosition=`-${s}px 0`}this.animationFrameId=requestAnimationFrame(this.animate)},this.element=e,this.element.classList.add("zombie-animation")}start(){this.animationFrameId===null&&(this.animationFrameId=requestAnimationFrame(this.animate))}stop(){this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}reset(){this.stop(),this.currentFrame=0,this.element.style.backgroundPosition="0 0",this.start()}}class M{constructor(e,n,t){this.walkFrameId=null,this.startPosition=0,this.walkDistance=0,this.walkDuration=16e3,this.onTargetReached=null,this.move=c=>{this.startTime||(this.startTime=c);const m=(c-this.startTime)/this.walkDuration;this.element.style.left=`${this.startPosition-m*this.walkDistance}px`,this.hasReachedTarget()?(this.stop(),this.onTargetReached&&this.onTargetReached()):this.walkFrameId=requestAnimationFrame(this.move)},this.startTime=0;const s=document.getElementById("zombie-container-template").content.cloneNode(!0);this.element=s.firstElementChild,this.gameBoard=e,this.target=n;const r=this.element.querySelector(".zombie-walk");this.animation=new x(r),e.appendChild(this.element);const l=this.gameBoard.getBoundingClientRect();this.element.style.left=`${l.width}px`,this.onTargetReached=t}hasReachedTarget(){const e=parseFloat(this.element.style.left)||0,n=this.gameBoard.getBoundingClientRect(),i=this.target.getElement().getBoundingClientRect().right-n.left;return e<=i}start(){this.stop(),this.show(),this.startTime=0,requestAnimationFrame(()=>{const e=this.gameBoard.getBoundingClientRect(),i=this.target.getElement().getBoundingClientRect().left-e.left;this.startPosition=e.width,this.walkDistance=this.startPosition-i,this.element.style.left=`${this.startPosition}px`,this.animation.start(),this.walkFrameId=requestAnimationFrame(this.move)})}stop(){this.animation.stop(),this.walkFrameId&&(cancelAnimationFrame(this.walkFrameId),this.walkFrameId=null)}hide(){this.element.style.display="none"}show(){this.element.style.display="block"}reset(){this.start()}getElement(){return this.element}}class q{constructor(e,n){const i=document.getElementById("game-board-template").content.cloneNode(!0);this.boardElement=i.firstElementChild,this.groundElement=new A(this.boardElement),this.zombieTarget=new B(this.boardElement),this.zombie=new M(this.boardElement,this.zombieTarget,()=>n()),e.appendChild(this.boardElement),this.resizeHandler=()=>this.handleResize(),window.addEventListener("resize",this.resizeHandler)}handleResize(){this.boardElement.classList.contains("hidden")||this.zombie.reset()}getZombieTarget(){return this.zombieTarget}show(){this.boardElement.classList.remove("hidden"),this.zombieTarget.show(),this.zombie.start()}hide(){this.boardElement.classList.add("hidden"),this.zombieTarget.hide()}zombieReset(){this.zombie.reset(),this.zombieTarget.show()}triggerDeathAnimation(){const e=this.zombie.getElement().style.left;new L(this.boardElement,e,()=>{}).start()}triggerEatingAnimation(e){const n=this.zombie.getElement().style.left;this.zombie.hide(),new P(this.boardElement,n,e).start(),this.zombieTarget.hide()}destroy(){window.removeEventListener("resize",this.resizeHandler)}}const N="/assets/wrong_answer-BUdmA9KY.mp3",R="/assets/zombie_death-D4ZVglDn.mp3",D="/assets/zombie_walk-B5R1kgBT.mp3",W="/assets/zombie_eating-BzXJ6LO-.mp3",g=class g{getMuteState(){return localStorage.getItem(g.MUTE_STATE_KEY)==="true"}setMuteState(e){localStorage.setItem(g.MUTE_STATE_KEY,String(e))}getBestScore(){const e=localStorage.getItem(g.BEST_SCORE_KEY);return e?parseInt(e,10):0}saveBestScore(e){localStorage.setItem(g.BEST_SCORE_KEY,e.toString())}};g.MUTE_STATE_KEY="zombiemath_mute_state",g.BEST_SCORE_KEY="zombiemath_best_score";let b=g;class O{constructor(){this.isMuted=!1,this.wrongAnswerAudio=new Audio(N),this.zombieDeathAudio=new Audio(R),this.zombieWalkAudio=new Audio(D),this.zombieEatingAudio=new Audio(W),this.zombieWalkAudio.loop=!0,this.localStorageService=new b,this.isMuted=this.localStorageService.getMuteState(),this.applyMuteState()}applyMuteState(){this.wrongAnswerAudio.muted=this.isMuted,this.zombieDeathAudio.muted=this.isMuted,this.zombieWalkAudio.muted=this.isMuted,this.zombieEatingAudio.muted=this.isMuted}toggleMute(){return this.isMuted=!this.isMuted,this.localStorageService.setMuteState(this.isMuted),this.applyMuteState(),this.isMuted}getMuteStatus(){return this.isMuted}playWrongAnswer(){this.isMuted||(this.wrongAnswerAudio.currentTime=0,this.wrongAnswerAudio.play().catch(e=>console.error("Error playing wrong answer sound:",e)))}playZombieDeath(){this.isMuted||(this.zombieDeathAudio.currentTime=0,this.zombieDeathAudio.play().catch(e=>console.error("Error playing zombie death sound:",e)))}playZombieWalk(){this.isMuted||this.zombieWalkAudio.play().catch(e=>console.error("Error playing zombie walk sound:",e))}playZombieEating(){this.isMuted||(this.zombieEatingAudio.currentTime=0,this.zombieEatingAudio.play().catch(e=>console.error("Error playing zombie eating sound:",e)))}stopZombieWalk(){this.zombieWalkAudio.pause(),this.zombieWalkAudio.currentTime=0}}class K{constructor(e,n,t,i){this.currentInput="",this.scoringSystem=n,this.localStorageService=t,this.soundManager=new O,this.gameBoardComponent=new q(e,()=>this.targetReached()),this.mathProblem=new z(e),this.keyboard=new F(e,async s=>await this.handleKeyboardInput(s),()=>this.endGame()),this.scoringView=new k(e),this.scoringSystem.setOnScoreChange(s=>this.scoringView.updateScore(s)),this.onGameOver=i}async handleKeyboardInput(e){typeof e=="number"?this.currentInput+=e:e==="clear"?this.clearInput():e==="end"&&this.endGame(),this.mathProblem.updateInput(this.currentInput),await this.checkAnswer()}endGame(){this.soundManager.stopZombieWalk();const e=this.scoringSystem.getCurrentScore(),n=this.localStorageService.getBestScore();e>n&&this.localStorageService.saveBestScore(e),this.onGameOver()}clearInput(){this.currentInput="",this.mathProblem.updateInput("")}async checkAnswer(){if(!this.mathProblem.hasEnoughDigits(this.currentInput.length))return;const e=parseInt(this.currentInput,10);this.mathProblem.checkAnswer(e)?(this.scoringSystem.addToCurrentScore(),this.scoringSystem.isStreakCompleted()&&(this.soundManager.playZombieDeath(),this.gameBoardComponent.triggerDeathAnimation(),this.gameBoardComponent.zombieReset(),this.scoringSystem.resetCorrectAnswersStreak()),await S(100),this.mathProblem.generateProblem(),this.currentInput=""):(this.soundManager.playWrongAnswer(),this.scoringSystem.resetCorrectAnswersStreak(),await S(200),this.clearInput())}targetReached(){this.soundManager.stopZombieWalk(),this.soundManager.playZombieEating(),this.gameBoardComponent.triggerEatingAnimation(()=>{this.onGameOver()})}restartGame(){this.scoringSystem.resetCurrentScore()}start(){this.scoringSystem.resetCurrentScore(),this.gameBoardComponent.show(),this.keyboard.show(),this.scoringView.show(),this.mathProblem.generateProblem(),this.soundManager.playZombieWalk()}stop(){this.soundManager.stopZombieWalk()}toggleSound(){return this.soundManager.toggleMute()}isMuted(){return this.soundManager.getMuteStatus()}}class _{constructor(e,n,t){this.onGameOver=()=>{this.pageManager.show("game-over")},this.pageManager=e,this.pageContainer=document.getElementById("game-page"),this.createBackground();const s=document.getElementById("game-header-template").content.cloneNode(!0);this.gameHeader=s.firstElementChild,this.pageContainer.appendChild(this.gameHeader);const c=document.getElementById("game-content-template").content.cloneNode(!0).firstElementChild;this.pageContainer.appendChild(c),this.gameController=new K(c,n,t,()=>this.onGameOver());const h=this.gameHeader.querySelector("#mute-button");h&&(h.addEventListener("click",()=>{const m=this.gameController.toggleSound();h.textContent=m?"üîá":"üîä"}),h.textContent=this.gameController.isMuted()?"üîá":"üîä"),this.pageContainer.classList.add("hidden")}createBackground(){const e=[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"}],n=document.getElementById("start-page-star-template");e.forEach(t=>{const s=n.content.cloneNode(!0).firstElementChild;s.style.top=t.top,s.style.fontSize=t.size,t.left&&(s.style.left=t.left),t.right&&(s.style.right=t.right),this.pageContainer.appendChild(s)})}show(){this.gameController.start();const e=this.pageContainer.querySelector("#score");if(e&&!this.gameHeader.contains(e)){const i=document.getElementById("score-container-template").content.cloneNode(!0).firstElementChild;i.appendChild(e),this.gameHeader.insertBefore(i,this.gameHeader.firstChild)}this.pageContainer.classList.remove("hidden")}hide(){this.gameController.stop(),this.pageContainer.classList.add("hidden")}}class ${constructor(e,n){this.container=e;const i=document.getElementById("difficulty-select-template").content.cloneNode(!0);this.selectElement=i.querySelector("select"),e.appendChild(i),this.selectElement.addEventListener("change",s=>{const r=s.target.value;n.setDifficultyLevel(r)})}hide(){this.container.classList.add("hidden")}show(){this.container.classList.remove("hidden")}}class H{constructor(e,n,t){this.container=document.getElementById("start-page"),this.pageManager=e,this.localStorageService=t,this.createBackground(),this.createContent(n)}createBackground(){const e=document.getElementById("start-page-star-template"),n=document.getElementById("start-page-moon-template"),t=document.getElementById("start-page-zombie-silhouette-template"),i=document.getElementById("start-page-zombie-silhouettes-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(m=>{const a=e.content.cloneNode(!0),d=a.querySelector(".star");d.style.top=m.top,d.style.fontSize=m.size,m.left&&(d.style.left=m.left),m.right&&(d.style.right=m.right),this.container.appendChild(a)});const r=n.content.cloneNode(!0);this.container.appendChild(r);const l=i.content.cloneNode(!0),c=l.querySelector(".zombie-silhouettes");[{left:"5%"},{left:"15%"},{left:"25%"},{right:"25%"},{right:"15%"},{right:"5%"}].forEach(m=>{const a=t.content.cloneNode(!0),d=a.querySelector(".zombie-silhouette");m.left&&(d.style.left=m.left),m.right&&(d.style.right=m.right),c.appendChild(a)}),this.container.appendChild(l)}createContent(e){var l,c;const t=document.getElementById("start-page-content-template").content.cloneNode(!0),i=t.querySelector(".difficulty-container");this.difficultyLevelComponent=new $(i,e);const s=document.createElement("div");s.className="best-score-badge",s.innerHTML=`
            <div class="best-score-icon">üèÜ</div>
            <div class="best-score-content">
                <span class="best-score-label">Best Score</span>
                <span class="best-score-value">0</span>
            </div>
        `;const r=(l=t.querySelector(".start-game-button"))==null?void 0:l.parentElement;r?r.insertBefore(s,t.querySelector(".start-game-button")):(c=i.parentElement)==null||c.insertBefore(s,i.nextSibling),this.bestScoreDisplay=s,this.startGameButton=t.querySelector(".start-game-button"),this.startGameButton.addEventListener("click",()=>{this.pageManager.show("game")}),this.container.appendChild(t)}show(){const e=this.localStorageService.getBestScore();if(this.bestScoreDisplay){const n=this.bestScoreDisplay.querySelector(".best-score-value");n&&(n.textContent=e.toString())}this.container.classList.remove("hidden")}hide(){this.container.classList.add("hidden")}}class G{constructor(e,n,t){const s=document.getElementById("game-over-container-template").content.cloneNode(!0);this.element=s.querySelector(".game-over-container"),this.scoreElement=this.element.querySelector(".score-value"),this.encouragement=this.element.querySelector(".encouragement"),this.starRating=this.element.querySelector(".star-rating"),this.homeButton=this.element.querySelector(".home-button"),this.restartButton=this.element.querySelector(".play-again-button"),this.homeButton.addEventListener("click",t),this.restartButton.addEventListener("click",n),e.appendChild(this.element)}show(e,n){var i;this.scoreElement.textContent=e.toString();let t=this.element.querySelector(".best-score-badge");if(!t)t=document.createElement("div"),t.className="best-score-badge",t.innerHTML=`
                <div class="best-score-icon">üèÜ</div>
                <div class="best-score-content">
                    <span class="best-score-label">Best Score</span>
                    <span class="best-score-value">${n}</span>
                </div>
            `,(i=this.scoreElement.parentElement)==null||i.insertBefore(t,this.scoreElement.nextSibling);else{const s=t.querySelector(".best-score-value");s&&(s.textContent=n.toString())}this.updateStarRating(e),this.updateEncouragement(e),this.showElement()}updateStarRating(e){let n=0;e>=100?n=5:e>=75?n=4:e>=50?n=3:e>=25?n=2:e>=10&&(n=1),this.starRating.innerHTML="";const t=document.getElementById("star-rating-star-template");for(let i=0;i<5;i++){const r=t.content.cloneNode(!0).querySelector("span");r.className=i<n?"star-filled":"star-empty",this.starRating.appendChild(r)}}updateEncouragement(e){const t=[{threshold:0,message:"Keep Trying! You'll get better! üí™"},{threshold:10,message:"Good start! Keep practicing! üåü"},{threshold:25,message:"Nice work! You're improving! üéâ"},{threshold:50,message:"Great job! You're doing awesome! üåà"},{threshold:75,message:"Fantastic! You're a math star! ‚≠ê"},{threshold:100,message:"Incredible! You're a math master! üèÜ"}].reverse().find(i=>e>=i.threshold);this.encouragement.textContent=(t==null?void 0:t.message)||"Keep Trying! You'll get better! üí™"}showElement(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}class Z{constructor(e,n,t){this.onRestart=()=>{this.pageManager.show("game")},this.onHome=()=>{this.pageManager.show("start")},this.pageManager=e,this.pageContainer=document.getElementById("game-over-page"),this.scoringSystem=n,this.localStorageService=t,this.createBackground(),this.gameOverComponent=new G(this.pageContainer,()=>this.onRestart(),()=>this.onHome()),this.hide()}createBackground(){const e=document.getElementById("start-page-star-template");[{top:"10%",left:"5%",size:"20px"},{top:"15%",right:"10%",size:"15px"},{top:"25%",left:"15%",size:"25px"},{top:"30%",right:"20%",size:"18px"},{top:"60%",left:"8%",size:"22px"},{top:"70%",right:"15%",size:"16px"}].forEach(t=>{const s=e.content.cloneNode(!0).querySelector(".star");s.style.top=t.top,s.style.fontSize=t.size,t.left&&(s.style.left=t.left),t.right&&(s.style.right=t.right),this.pageContainer.appendChild(s)});for(let t=0;t<3;t++){const s=e.content.cloneNode(!0).querySelector(".star");s.style.bottom=`${200+t*50}px`,s.style.left=`${20+t*30}%`,s.style.fontSize="25px",this.pageContainer.appendChild(s)}}show(){const e=this.scoringSystem.getCurrentScore(),n=this.localStorageService.getBestScore();this.gameOverComponent.show(e,n),this.pageContainer.classList.remove("hidden")}hide(){this.pageContainer.classList.add("hidden")}}class Y{constructor(){this.pages={},this.currentPage=null}add(e,n){this.pages[e]=n}show(e){this.currentPage&&this.pages[this.currentPage].hide(),this.currentPage=e,this.pages[e].show()}hideAll(){for(const e of Object.values(this.pages))e.hide()}}var u=(o=>(o.Easy="easy",o.Medium="medium",o.Hard="hard",o.VeryHard="very-hard",o.Expert="expert",o))(u||{});class U{constructor(){this.currentScore=0,this.onScoreChange=null,this.difficultyLevel=u.Easy,this.correctAnswersStreak=0}setDifficultyLevel(e){this.difficultyLevel=e,this.resetCorrectAnswersStreak()}addToCurrentScore(){let e=this.calculateScore();this.currentScore+=e,this.correctAnswersStreak++,this.onScoreChange&&this.onScoreChange(this.currentScore)}calculateScore(){let e=0;switch(this.difficultyLevel){case u.Easy:e=1;break;case u.Medium:e=2;break;case u.Hard:e=3;break;case u.VeryHard:e=4;break;case u.Expert:e=5;break}return e}getCurrentScore(){return this.currentScore}resetCurrentScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}resetScore(){this.currentScore=0,this.onScoreChange&&this.onScoreChange(this.currentScore)}setOnScoreChange(e){this.onScoreChange=e}resetCorrectAnswersStreak(){this.correctAnswersStreak=0}isStreakCompleted(){const e={[u.Easy]:1,[u.Medium]:2,[u.Hard]:3,[u.VeryHard]:4,[u.Expert]:5};return this.correctAnswersStreak>=e[this.difficultyLevel]}}const X="modulepreload",V=function(o){return"/"+o},E={},j=function(e,n,t){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=V(c),c in E)return;E[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const a=document.createElement("link");if(a.rel=h?"stylesheet":X,h||(a.as="script"),a.crossOrigin="",a.href=c,l&&a.setAttribute("nonce",l),document.head.appendChild(a),h)return new Promise((d,p)=>{a.addEventListener("load",d),a.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return i.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function Q(o={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:t,onRegistered:i,onRegisteredSW:s,onRegisterError:r}=o;let l,c;const h=async(a=!0)=>{await c};async function m(){if("serviceWorker"in navigator){if(l=await j(async()=>{const{Workbox:a}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:a}},[]).then(({Workbox:a})=>new a("/sw.js",{scope:"/",type:"classic"})).catch(a=>{r==null||r(a)}),!l)return;l.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),l.addEventListener("installed",a=>{a.isUpdate||t==null||t()}),l.register({immediate:e}).then(a=>{s?s("/sw.js",a):i==null||i(a)}).catch(a=>{r==null||r(a)})}}return c=m(),h}Q({onNeedRefresh(){console.log("[PWA] New content available, will update on next visit")},onOfflineReady(){console.log("[PWA] App ready to work offline")},immediate:!0});document.addEventListener("DOMContentLoaded",()=>{console.log("[App] Initializing PWA features");const o=new Y,e=new U,n=new b,t=new H(o,e,n),i=new _(o,e,n),s=new Z(o,e,n);o.add("start",t),o.add("game",i),o.add("game-over",s),o.hideAll(),o.show("start"),window.addEventListener("pwa-installable",r=>{r.detail.canInstall&&console.log("[App] PWA can be installed")}),window.addEventListener("pwa-update-available",()=>{console.log("[App] PWA update available")})});
